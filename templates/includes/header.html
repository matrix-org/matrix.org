<header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        {% for link in navigation.header %}
        {% if link.section %}
        {% set href = "/" ~ link.section ~ "/" %}
        {% set section = get_section(path=link.section ~ "/_index.md") %}
        <details {{ util::current_open(if_path_starts_with=href) }} class="section-wrap mobile">
            <summary class="section {{ util::current_class(if_path_starts_with=href) }}">
                {{ link.title }}
                <div class="arrow"></div>
            </summary>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    {% for page in section.pages %}
                    <a href="{{ page.path }}">{{ page.title }}</a>
                    {% endfor %}
                    {% for subsection_path in section.subsections %}
                    {% set subsection = get_section(path=subsection_path) %}
                    <a href="{{ subsection.path }}">{{ subsection.title }}</a>
                    {% endfor %}
                </div>
            </div>
        </details>
        <div class="section-wrap desktop">
            <a href="{{ href }}" class="section {{ util::current_class(if_path_starts_with=href) }}">
                {{ link.title }}
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    {% for page in section.pages %}
                    <a href="{{ page.path }}">{{ page.title }}</a>
                    {% endfor %}
                    {% for subsection_path in section.subsections %}
                    {% set subsection = get_section(path=subsection_path) %}
                    <a href="{{ subsection.path }}">{{ subsection.title }}</a>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% else %}
        <a href="{{ link.href }}" class="{% if link.primary %}primary{% endif %}
            {{ util::current_class(if_path_starts_with=link.href) }}">
            {{ link.title }}
        </a>
        {% endif %}
        {% endfor %}
    </nav>
</header>
