{% import "macros/sdks.html" as sdkutils %}
{% set sdks_data = load_data(path="content/ecosystem/sdks/sdks.toml") %}
{% set licences = [] %}
{% set languages = [] %}
{% for sdk in sdks_data.sdks %}
{% set_global licences = licences | concat(with=sdk.licence) %}
{% set_global languages = languages | concat(with=sdk.language) %}
{% endfor %}
{% set licences = licences | unique | sort %}
{% set languages = languages | unique | sort %}

<fieldset id="sdk-purpose-selector">
    <input type="radio" name="sdk-purpose" id="purpose-client" checked />
    <label for="purpose-client">Client SDKs</label>

    <input type="radio" name="sdk-purpose" id="purpose-bot" />
    <label for="purpose-bot">Bot SDKs</label>

    <input type="radio" name="sdk-purpose" id="purpose-bridge">
    <label for="purpose-bridge">Bridge SDKs</label>
</fieldset>

<div id="sdks-panels">
    <div id="purpose-client-panel" class="panel">
        <p>
            Client SDKs are used to develop clients humans will interact with.
            They handle all the Matrix heavy lifting and leave it up to the
            developer to implement a UI.
        </p>

        <div id="client-sdks-filters" class="filters">
            <div class="filter-wrap">
                <div id="client-sdks-filter-maturity" class="filter">
                    Maturity
                    <div class="divider"></div>
                    <img src="/assets/down-arrow.svg">
                </div>
                <div id="client-sdks-filter-maturity-menu" class="filter-menu">
                    <p>The SDK can support any of the maturity levels checked.</p>
                    <div class="filter-option">
                        <input id="maturity-stable" type="checkbox" checked>
                        <label for="maturity-stable">Stable</label>
                    </div>
                    <div class="filter-option">
                        <input id="maturity-beta" type="checkbox" checked>
                        <label for="maturity-beta">Beta</label>
                    </div>
                    <div class="filter-option">
                        <input id="maturity-alpha" type="checkbox" checked>
                        <label for="maturity-alpha">Alpha</label>
                    </div>
                    <div class="filter-option">
                        <input id="maturity-obsolete" type="checkbox">
                        <label for="maturity-obsolete">Obsolete</label>
                    </div>
                    <div class="reset-links">Select <a>all</a> - <a>none</a></div>
                </div>
            </div>
            <div class="filter-wrap">
                <div id="client-sdks-filter-licence" class="filter">
                    Licence
                    <div class="divider"></div>
                    <img src="/assets/down-arrow.svg">
                </div>
                <div id="client-sdks-filter-licence-menu" class="filter-menu">
                    <p>The client can support any of the licences checked.</p>
                    {% for licence in licences %}
                    <div class="filter-option">
                        <input id="licence-{{ licence | slugify }}" type="checkbox" checked>
                        <label for="licence-{{ licence | slugify }}">{{ licence }}</label>
                    </div>
                    {% endfor %}
                    <div class="reset-links">Select <a>all</a> - <a>none</a></div>
                </div>
            </div>
            <div class="filter-wrap">
                <div id="client-sdks-filter-language" class="filter">
                    Language
                    <div class="divider"></div>
                    <img src="/assets/down-arrow.svg">
                </div>
                <div id="client-sdks-filter-language-menu" class="filter-menu">
                    <p>The client must support any of the languages checked.</p>
                    {% for language in languages %}
                    <div class="filter-option">
                        <input id="language-{{ language | slugify }}" type="checkbox" checked>
                        <label for="language-{{ language | slugify }}">{{ language }}</label>
                    </div>
                    {% endfor %}
                    <div class="reset-links">Select <a>all</a> - <a>none</a></div>
                </div>
            </div>
        </div>

        <div id="client-sdks" class="projects-card-deck">
            {% for sdk in sdks_data.sdks | sort(attribute="maturity") | reverse %}
            {% if sdk.purpose is containing("client") %}
            <div>
                <div class="project-card {{ sdkutils::classes(sdk=sdk) }}">
                    <div class="title-row">
                        <h3>{{ sdk.name }}</h3>
                        <div class="maturity {{ sdk.maturity | lower }}">{{ sdk.maturity }}</div>
                    </div>
                    <div class="author">{{ sdk.maintainer }}</div>
                    <div class="licence-language">
                        <div class="pill">{{ sdk.licence }}</div>
                        <div class="pill">{{ sdk.language }}</div>
                    </div>
                    {% if sdk.description %}<p>{{ sdk.description }}</p>{% endif %}
                    <div class="server-links">
                        {% if sdk.repository %}
                        <a href="{{ sdk.repository }}">
                            {{ load_data(path="/assets/projects/repo.svg") | safe }}
                            Repository
                        </a>
                        {% endif %}
                        {% if sdk.room %}
                        <a href="https://matrix.to/#/{{ sdk.room }}">
                            {{ load_data(path="/assets/projects/matrix.svg") | safe }}
                            Matrix Room
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
    <div id="purpose-bot-panel" class="panel">
        <p>
            Bot SDKs are used to develop bots no humans will interact with.
            They handle all the Matrix heavy lifting so the developer can focus
            on what the bot is actually useful for.
        </p>

        <div id="bot-sdks-filters" class="filters">
            <div class="filter-wrap">
                <div id="bot-sdks-filter-maturity" class="filter">
                    Maturity
                    <div class="divider"></div>
                    <img src="/assets/down-arrow.svg">
                </div>
                <div id="bot-sdks-filter-maturity-menu" class="filter-menu">
                    <p>The SDK can support any of the maturity levels checked.</p>
                    <div class="filter-option">
                        <input id="maturity-stable" type="checkbox" checked>
                        <label for="maturity-stable">Stable</label>
                    </div>
                    <div class="filter-option">
                        <input id="maturity-beta" type="checkbox" checked>
                        <label for="maturity-beta">Beta</label>
                    </div>
                    <div class="filter-option">
                        <input id="maturity-alpha" type="checkbox" checked>
                        <label for="maturity-alpha">Alpha</label>
                    </div>
                    <div class="filter-option">
                        <input id="maturity-obsolete" type="checkbox">
                        <label for="maturity-obsolete">Obsolete</label>
                    </div>
                    <div class="reset-links">Select <a>all</a> - <a>none</a></div>
                </div>
            </div>
            <div class="filter-wrap">
                <div id="bot-sdks-filter-licence" class="filter">
                    Licence
                    <div class="divider"></div>
                    <img src="/assets/down-arrow.svg">
                </div>
                <div id="bot-sdks-filter-licence-menu" class="filter-menu">
                    <p>The client can support any of the licences checked.</p>
                    {% for licence in licences %}
                    <div class="filter-option">
                        <input id="licence-{{ licence | slugify }}" type="checkbox" checked>
                        <label for="licence-{{ licence | slugify }}">{{ licence }}</label>
                    </div>
                    {% endfor %}
                    <div class="reset-links">Select <a>all</a> - <a>none</a></div>
                </div>
            </div>
            <div class="filter-wrap">
                <div id="bot-sdks-filter-language" class="filter">
                    Language
                    <div class="divider"></div>
                    <img src="/assets/down-arrow.svg">
                </div>
                <div id="bot-sdks-filter-language-menu" class="filter-menu">
                    <p>The client must support any of the languages checked.</p>
                    {% for language in languages %}
                    <div class="filter-option">
                        <input id="language-{{ language | slugify }}" type="checkbox" checked>
                        <label for="language-{{ language | slugify }}">{{ language }}</label>
                    </div>
                    {% endfor %}
                    <div class="reset-links">Select <a>all</a> - <a>none</a></div>
                </div>
            </div>
        </div>

        <div id="bot-sdks" class="projects-card-deck">
            {% for sdk in sdks_data.sdks | sort(attribute="maturity") | reverse %}
            {% if sdk.purpose is containing("bot") %}
            <div>
                <div class="project-card {{ sdkutils::classes(sdk=sdk) }}">
                    <div class="title-row">
                        <h3>{{ sdk.name }}</h3>
                        <div class="maturity {{ sdk.maturity | lower }}">{{ sdk.maturity }}</div>
                    </div>
                    <div class="author">{{ sdk.maintainer }}</div>
                    <div class="licence-language">
                        <div class="pill">{{ sdk.licence }}</div>
                        <div class="pill">{{ sdk.language }}</div>
                    </div>
                    {% if sdk.description %}<p>{{ sdk.description }}</p>{% endif %}
                    <div class="server-links">
                        {% if sdk.repository %}
                        <a href="{{ sdk.repository }}">
                            {{ load_data(path="/assets/projects/repo.svg") | safe }}
                            Repository
                        </a>
                        {% endif %}
                        {% if sdk.room %}
                        <a href="https://matrix.to/#/{{ sdk.room }}">
                            {{ load_data(path="/assets/projects/matrix.svg") | safe }}
                            Matrix Room
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
    <div id="purpose-bridge-panel" class="panel">
        <p>
            Bridge SDKs are used to develop appservices meant to either connect
            a Matrix community to a third party chat platform, or to exchange
            data with another platform.
        </p>

        <div id="bridge-sdks-filters" class="filters">
            <div class="filter-wrap">
                <div id="bridge-sdks-filter-maturity" class="filter">
                    Maturity
                    <div class="divider"></div>
                    <img src="/assets/down-arrow.svg">
                </div>
                <div id="bridge-sdks-filter-maturity-menu" class="filter-menu">
                    <p>The SDK can support any of the maturity levels checked.</p>
                    <div class="filter-option">
                        <input id="maturity-stable" type="checkbox" checked>
                        <label for="maturity-stable">Stable</label>
                    </div>
                    <div class="filter-option">
                        <input id="maturity-beta" type="checkbox" checked>
                        <label for="maturity-beta">Beta</label>
                    </div>
                    <div class="filter-option">
                        <input id="maturity-alpha" type="checkbox" checked>
                        <label for="maturity-alpha">Alpha</label>
                    </div>
                    <div class="filter-option">
                        <input id="maturity-obsolete" type="checkbox">
                        <label for="maturity-obsolete">Obsolete</label>
                    </div>
                    <div class="reset-links">Select <a>all</a> - <a>none</a></div>
                </div>
            </div>
            <div class="filter-wrap">
                <div id="bridge-sdks-filter-licence" class="filter">
                    Licence
                    <div class="divider"></div>
                    <img src="/assets/down-arrow.svg">
                </div>
                <div id="bridge-sdks-filter-licence-menu" class="filter-menu">
                    <p>The client can support any of the licences checked.</p>
                    {% for licence in licences %}
                    <div class="filter-option">
                        <input id="licence-{{ licence | slugify }}" type="checkbox" checked>
                        <label for="licence-{{ licence | slugify }}">{{ licence }}</label>
                    </div>
                    {% endfor %}
                    <div class="reset-links">Select <a>all</a> - <a>none</a></div>
                </div>
            </div>
            <div class="filter-wrap">
                <div id="bridge-sdks-filter-language" class="filter">
                    Language
                    <div class="divider"></div>
                    <img src="/assets/down-arrow.svg">
                </div>
                <div id="bridge-sdks-filter-language-menu" class="filter-menu">
                    <p>The client must support any of the languages checked.</p>
                    {% for language in languages %}
                    <div class="filter-option">
                        <input id="language-{{ language | slugify }}" type="checkbox" checked>
                        <label for="language-{{ language | slugify }}">{{ language }}</label>
                    </div>
                    {% endfor %}
                    <div class="reset-links">Select <a>all</a> - <a>none</a></div>
                </div>
            </div>
        </div>

        <div id="bridge-sdks" class="projects-card-deck">
            {% for sdk in sdks_data.sdks | sort(attribute="maturity") | reverse %}
            {% if sdk.purpose is containing("bridge") %}
            <div>
                <div class="project-card {{ sdkutils::classes(sdk=sdk) }}">
                    <div class="title-row">
                        <h3>{{ sdk.name }}</h3>
                        <div class="maturity {{ sdk.maturity | lower }}">{{ sdk.maturity }}</div>
                    </div>
                    <div class="author">{{ sdk.maintainer }}</div>
                    <div class="licence-language">
                        <div class="pill">{{ sdk.licence }}</div>
                        <div class="pill">{{ sdk.language }}</div>
                    </div>
                    {% if sdk.description %}<p>{{ sdk.description }}</p>{% endif %}
                    <div class="server-links">
                        {% if sdk.repository %}
                        <a href="{{ sdk.repository }}">
                            {{ load_data(path="/assets/projects/repo.svg") | safe }}
                            Repository
                        </a>
                        {% endif %}
                        {% if sdk.room %}
                        <a href="https://matrix.to/#/{{ sdk.room }}">
                            {{ load_data(path="/assets/projects/matrix.svg") | safe }}
                            Matrix Room
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
</div>

<div id="filters-overlay"></div>
